/*
 green-turtle version 1.1.0 Copyright (c) 2011-2012, R. Alexander Milowski <alex@milowski.com> All rights reserved. */
if("undefined"==typeof GreenTurtle)var GreenTurtle=function(){function v(){}function g(a){this.target=a?a:{graph:{subjects:{},prefixes:{},terms:{}}};this.theOne="_:"+(new Date).getTime();this.vocabulary=this.language=null;this.blankCounter=0;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.inXHTMLMode=!1;this.absURIRE=/[\w\_\-]+:\S+/;this.finishedHandlers=[];this.init()}function O(){var a=this;this.curieParser={trim:function(a){return a.replace(/^\s\s*/,
"").replace(/\s\s*$/,"")},parse:function(b,c){b=this.trim(b);"["==b.charAt(0)&&"]"==b.charAt(b.length-1)&&(b=b.substring(1,b.length-1));var e=b.indexOf(":");if(0<=e){var f=b.substring(0,e);if(""==f)return(f=a.prefixes[""])?f+b.substring(e+1):null;if("_"==f)return"_:"+b.substring(e+1);if(l.NCNAME.test(f)&&(f=a.prefixes[f]))return f+b.substring(e+1)}return c?a.baseURI.resolve(b):b}};this.base=null;this.toString=function(a){var a=a?"@base <"+a+"> .\n":"",c;for(c in this.subjects)a+=this.subjects[c].toString(),
a+="\n";return a};this.clear=function(){this.subjects={};this.prefixes={};this.terms={}};this.clear()}function H(a,b){this.graph=a;this.id=this.subject=b;this.predicates={};this.origins=[];this.types=[]}function x(a){this.predicate=this.id=a;this.objects=[]}function q(a){g.call(this,a)}function P(a){this.query=function(b,c){if(!b)return a.getProjections(c);var e=[],f;for(f in a._data_.graph.subjects){var n=a._data_.graph.subjects[f],d;for(d in b){var i=a._data_.graph.curieParser.parse(d,!0),i=n.predicates[i];
if(!i){n=null;break}for(var h=a._data_.graph.curieParser.parse(b[d],!1),g=null,j=0;!g&&j<i.objects.length;j++)i.objects[j].value==h&&(g=i.objects[j]);if(!g){n=null;break}}n&&e.push(l.toProjection(a,n,c))}return e}}function L(a,b){this._data_={owner:a,subject:b,properties:{}}}function l(a){this._data_={tripleCount:0,graph:new O};this._data_.graph.baseURI=this.parseURI(a);this._data_.baseURI=this._data_.graph.baseURI;Object.defineProperty(this,"rdfa",{value:new P(this),writable:!1,configurable:!1,enumerable:!0});
Object.defineProperty(this,"graph",{value:this._data_.graph,writable:!1,configurable:!1,enumerable:!0});Object.defineProperty(this,"implementation",{value:GreenTurtle.implementation,writable:!1,configurable:!1,enumerable:!0})}function d(){this.reset();this.onError=function(a,b){console.log(a+": "+b)}}var N={};v.SCHEME=/^[A-Za-z][A-Za-z0-9\+\-\.]*\:/;v.prototype.parseURI=function(a){var b=v.SCHEME.exec(a);if(!b)throw"Bad URI value, no scheme: "+a;a={spec:a};a.scheme=b[0].substring(0,b[0].length-1);
a.schemeSpecificPart=a.spec.substring(b[0].length);"/"==a.schemeSpecificPart.charAt(0)&&"/"==a.schemeSpecificPart.charAt(1)?this.parseGeneric(a):a.isGeneric=!1;a.normalize=function(){if(this.isGeneric&&0!=this.segments.length){if(1<this.path.length&&"/."==this.path.substring(this.path.length-2))this.path=this.path.substring(0,this.path.length-1),this.segments.splice(this.segments.length-1,1);else{var a=this.path.charAt(this.path.length-1);"/"!=a&&(a="");for(var b=0;b<this.segments.length;b++)0<b&&
".."==this.segments[b]&&(this.segments.splice(b-1,2),b-=2),"."==this.segments[b]&&(this.segments.splice(b,1),b--);this.path=0==this.segments.length?"/":"/"+this.segments.join("/")+a}this.schemeSpecificPart="//"+this.authority+this.path;"undefined"!=typeof this.query&&(this.schemeSpecificPart+="?"+this.query);"undefined"!=typeof this.fragment&&(this.schemeSpecificPart+="#"+this.fragment);this.spec=this.scheme+":"+this.schemeSpecificPart}};a.resolve=function(a){if(!a)return this.spec;if("#"==a.charAt(0)){var b=
this.spec.lastIndexOf("#");return 0>b?this.spec+a:this.spec.substring(0,b)+a}if(!this.isGeneric)throw"Cannot resolve uri against non-generic URI: "+this.spec;a.indexOf(":");if("/"==a.charAt(0))return this.scheme+"://"+this.authority+a;if("."==a.charAt(0)&&"/"==a.charAt(1)){if("/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a.substring(2);b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b)+a.substring(1)}if(v.SCHEME.test(a))return a;
if("?"==a.charAt(0)||"/"==this.path.charAt(this.path.length-1))return this.scheme+"://"+this.authority+this.path+a;b=this.path.lastIndexOf("/");return this.scheme+"://"+this.authority+this.path.substring(0,b+1)+a};a.relativeTo=function(a){if(a.scheme!=this.scheme)return this.spec;if(!this.isGeneric)throw"A non generic URI cannot be made relative: "+this.spec;if(!a.isGeneric)throw"Cannot make a relative URI against a non-generic URI: "+a.spec;if(a.authority!=this.authority)return this.spec;for(var b=
0;b<this.segments.length&&b<a.segments.length;b++)if(this.segments[b]!=a.segments[b]){for(var f="",n=b;n<a.segments.length;n++)f+="../";for(n=b;n<this.segments.length;n++)f+=this.segments[n],n+1<this.segments.length&&(f+="/");"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}if(this.segments.length==a.segments.length)return this.hash?this.hash:this.query?this.query:"";if(b<this.segments.length){f="";for(n=b;n<this.segments.length;n++)f+=this.segments[n],n+1<this.segments.length&&(f+="/");
"/"==this.path.charAt(this.path.length-1)&&(f+="/");return f}throw"Cannot calculate a relative URI for "+this.spec+" against "+a.spec;};return a};v.prototype.parseGeneric=function(a){if("/"!=a.schemeSpecificPart.charAt(0)||"/"!=a.schemeSpecificPart.charAt(1))throw"Generic URI values should start with '//':"+a.spec;var b=a.schemeSpecificPart.substring(2),c=b.indexOf("/");a.authority=0>c?b:b.substring(0,c);a.path=0>c?"":b.substring(c);b=a.path.indexOf("#");0<=b&&(a.fragment=a.path.substring(b+1),a.path=
a.path.substring(0,b));b=a.path.indexOf("?");0<=b&&(a.query=a.path.substring(b+1),a.path=a.path.substring(0,b));if("/"==a.path||""==a.path)a.segments=[];else{a.segments=a.path.split(/\//);0<a.segments.length&&(""==a.segments[0]&&1<a.path.length&&"/"!=a.path.charAt(1))&&a.segments.shift();0<a.segments.length&&0<a.path.length&&"/"==a.path.charAt(a.path.length-1)&&""==a.segments[a.segments.length-1]&&1<a.path.length&&"/"!=a.path.charAt(a.path.length-2)&&a.segments.pop();for(b=0;b<a.segments.length;b++)for(var c=
a.segments[b].split(/%[A-Za-z0-9][A-Za-z0-9]|[\ud800-\udfff][\ud800-\udfff]|[A-Za-z0-9\-\._~!$&'()*+,;=@:\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+/),e=0;e<c.length;e++)if(0<c[e].length)throw"Unecaped character "+c[e].charAt(0)+" ("+c[e].charCodeAt(0)+") in URI "+a.spec;}a.isGeneric=!0};g.prototype=new v;g.prototype.constructor=g;g.prototype.newBlankNode=function(){this.blankCounter++;return"_:"+this.blankCounter};g.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral";g.HTMLLiteralURI=
"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML";g.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";g.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";g.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";g.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";g.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
g.NCNAME=RegExp("^"+g.nameStartChar+g.nameChar+"*$");g.trim=function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};g.prototype.tokenize=function(a){return g.trim(a).split(/\s+/)};g.prototype.parseSafeCURIEOrCURIEOrURI=function(a,b,c){a=g.trim(a);return"["==a.charAt(0)&&"]"==a.charAt(a.length-1)?(a=a.substring(1,a.length-1),a=a.trim(a),0==a.length?null:"_:"==a?this.theOne:this.parseCURIE(a,b,c)):this.parseCURIEOrURI(a,b,c)};g.prototype.parseCURIE=function(a,b){var c=a.indexOf(":");if(0<=c){var e=
a.substring(0,c);if(""==e)return(e=b[""])?e+a.substring(c+1):null;if("_"==e)return"_:"+a.substring(c+1);if(g.NCNAME.test(e)&&(e=b[e]))return e+a.substring(c+1)}return null};g.prototype.parseCURIEOrURI=function(a,b,c){return(b=this.parseCURIE(a,b,c))?b:this.resolveAndNormalize(c,a)};g.prototype.parsePredicate=function(a,b,c,e,f,n){return""==a?null:(a=this.parseTermOrCURIEOrAbsURI(a,b,n?null:c,e,f))&&0==a.indexOf("_:")?null:a};g.prototype.parseTermOrCURIEOrURI=function(a,b,c,e,f){a=g.trim(a);if((e=
this.parseCURIE(a,e,f))||(e=c[a]))return e;e=a.toLowerCase();return(e=c[e])?e:b&&!this.absURIRE.exec(a)?b+a:this.resolveAndNormalize(f,a)};g.prototype.parseTermOrCURIEOrAbsURI=function(a,b,c,e,f){a=g.trim(a);if(e=this.parseCURIE(a,e,f))return e;if(c){if(b&&!this.absURIRE.exec(a))return b+a;if(b=c[a])return b;b=a.toLowerCase();if(b=c[b])return b}return this.absURIRE.exec(a)?this.resolveAndNormalize(f,a):null};g.prototype.resolveAndNormalize=function(a,b){var c=a.resolve(b),c=this.parseURI(c);c.normalize();
return c.spec};g.prototype.parsePrefixMappings=function(a,b){for(var c=this.tokenize(a),e=null,f=0;f<c.length;f++)":"==c[f][c[f].length-1]?e=c[f].substring(0,c[f].length-1):e&&(b[e]=this.target.baseURI?this.target.baseURI.resolve(c[f]):c[f],e=null)};g.prototype.copyMappings=function(a){var b={},c;for(c in a)b[c]=a[c];return b};g.prototype.ancestorPath=function(a){for(var b="";a&&a.nodeType!=Node.DOCUMENT_NODE;)b="/"+a.localName+b,a=a.parentNode;return b};g.prototype.setContext=function(a){"html"==
a.localName&&"XHTML+RDFa 1.1"==a.getAttribute("version")?this.setXHTMLContext():"html"==a.localName||"http://www.w3.org/1999/xhtml"==a.namespaceURI?document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"==document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"==document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"==
document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()};g.prototype.setInitialContext=function(){this.vocabulary=null;this.target.graph.prefixes={};this.target.graph.terms={};this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}];this.target.graph.prefixes[""]="http://www.w3.org/1999/xhtml/vocab#";this.target.graph.prefixes.grddl="http://www.w3.org/2003/g/data-view#";this.target.graph.prefixes.ma="http://www.w3.org/ns/ma-ont#";
this.target.graph.prefixes.owl="http://www.w3.org/2002/07/owl#";this.target.graph.prefixes.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#";this.target.graph.prefixes.rdfa="http://www.w3.org/ns/rdfa#";this.target.graph.prefixes.rdfs="http://www.w3.org/2000/01/rdf-schema#";this.target.graph.prefixes.rif="http://www.w3.org/2007/rif#";this.target.graph.prefixes.skos="http://www.w3.org/2004/02/skos/core#";this.target.graph.prefixes.skosxl="http://www.w3.org/2008/05/skos-xl#";this.target.graph.prefixes.wdr=
"http://www.w3.org/2007/05/powder#";this.target.graph.prefixes["void"]="http://rdfs.org/ns/void#";this.target.graph.prefixes.wdrs="http://www.w3.org/2007/05/powder-s#";this.target.graph.prefixes.xhv="http://www.w3.org/1999/xhtml/vocab#";this.target.graph.prefixes.xml="http://www.w3.org/XML/1998/namespace";this.target.graph.prefixes.xsd="http://www.w3.org/2001/XMLSchema#";this.target.graph.prefixes.sd="http://www.w3.org/ns/sparql-service-description#";this.target.graph.prefixes.org="http://www.w3.org/ns/org#";
this.target.graph.prefixes.gldp="http://www.w3.org/ns/people#";this.target.graph.prefixes.cnt="http://www.w3.org/2008/content#";this.target.graph.prefixes.dcat="http://www.w3.org/ns/dcat#";this.target.graph.prefixes.earl="http://www.w3.org/ns/earl#";this.target.graph.prefixes.ht="http://www.w3.org/2006/http#";this.target.graph.prefixes.ptr="http://www.w3.org/2009/pointers#";this.target.graph.prefixes.cc="http://creativecommons.org/ns#";this.target.graph.prefixes.ctag="http://commontag.org/ns#";this.target.graph.prefixes.dc=
"http://purl.org/dc/terms/";this.target.graph.prefixes.dcterms="http://purl.org/dc/terms/";this.target.graph.prefixes.foaf="http://xmlns.com/foaf/0.1/";this.target.graph.prefixes.gr="http://purl.org/goodrelations/v1#";this.target.graph.prefixes.ical="http://www.w3.org/2002/12/cal/icaltzd#";this.target.graph.prefixes.og="http://ogp.me/ns#";this.target.graph.prefixes.rev="http://purl.org/stuff/rev#";this.target.graph.prefixes.sioc="http://rdfs.org/sioc/ns#";this.target.graph.prefixes.v="http://rdf.data-vocabulary.org/#";
this.target.graph.prefixes.vcard="http://www.w3.org/2006/vcard/ns#";this.target.graph.prefixes.schema="http://schema.org/";this.target.graph.terms.describedby="http://www.w3.org/2007/05/powder-s#describedby";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role"};g.prototype.setXMLContext=function(){this.setInitialContext();this.inHTMLMode=this.inXHTMLMode=!1};g.prototype.setHTMLContext=function(){this.setInitialContext();
this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.inXHTMLMode=!1;this.inHTMLMode=!0};g.prototype.setXHTMLContext=function(){this.setInitialContext();this.inXHTMLMode=!0;this.inHTMLMode=!1;this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}];this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate";this.target.graph.terms.appendix=
"http://www.w3.org/1999/xhtml/vocab#appendix";this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark";this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite";this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter";this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents";this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright";this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first";
this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary";this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help";this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon";this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index";this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last";this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license";this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta";
this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next";this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev";this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous";this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section";this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet";this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection";this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start";
this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top";this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up";this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1";this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related";this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role";this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"};g.prototype.init=function(){};g.prototype.newSubjectOrigin=
function(){};g.prototype.addTriple=function(){};g.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,
type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}];g.deriveDateTimeType=function(a){for(var b=0;b<
g.dateTimeTypes.length;b++){var c=g.dateTimeTypes[b].pattern.exec(a);if(c&&c[0].length==a.length)return g.dateTimeTypes[b].type}return null};g.prototype.process=function(a,b){a.nodeType==Node.DOCUMENT_NODE?(a=a.documentElement,this.setContext(a)):a.parentNode.nodeType==Node.DOCUMENT_NODE&&this.setContext(a);var c=[],e=function(a){var c=a.indexOf("#");0<=c&&(a=a.substring(0,c));b&&b.baseURIMap&&(a=b.baseURIMap(a));return a};for(c.push({current:a,context:this.push(null,e(a.baseURI))});0<c.length;){var f=
c.shift();if(f.parent){if(!(f.context.parent&&f.context.parent.listMapping==f.listMapping))for(var n in f.listMapping){var d=f.listMapping[n];if(0==d.length)this.addTriple(f.parent,f.subject,n,{type:g.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});else{for(var i=[],h=0;h<d.length;h++)i.push(this.newBlankNode());for(h=0;h<i.length;h++)this.addTriple(f.parent,i[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",d[h]),this.addTriple(f.parent,i[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",
{type:g.objectURI,value:h+1<i.length?i[h+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(f.parent,f.subject,n,{type:g.objectURI,value:i[0]})}}}else{var i=f.current,f=f.context,A=!1,j=null,m=null,p=null,s=f.prefixes,d=!1,l=[],w=f.listMapping,q=f.parent?!1:!0,M=f.language,E=f.vocabulary,t=this.parseURI(e(i.baseURI));i.item=null;if(h=i.getAttributeNode("vocab"))h=g.trim(h.value),0<h.length?(E=h,this.addTriple(i,t.spec,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:g.objectURI,
value:E})):E=this.vocabulary;for(h=0;h<i.attributes.length;h++){var y=i.attributes[h];if("x"==y.nodeName.charAt(0)&&0==y.nodeName.indexOf("xmlns:")){d||(s=this.copyMappings(s),d=!0);var B=y.nodeName.substring(6),y=g.trim(y.value);s[B]=this.target.baseURI?this.target.baseURI.resolve(y):y}}if(h=i.getAttributeNode("prefix"))d||(s=this.copyMappings(s),d=!0),this.parsePrefixMappings(h.value,s);d=null;for(h=0;!d&&h<this.langAttributes.length;h++)d=i.getAttributeNodeNS(this.langAttributes[h].namespaceURI,
this.langAttributes[h].localName);d&&(h=g.trim(d.value),M=0<h.length?h:null);var B=i.getAttributeNode("rel"),y=i.getAttributeNode("rev"),C=i.getAttributeNode("typeof"),v=i.getAttributeNode("property"),x=i.getAttributeNode("datatype"),z=this.inHTMLMode?i.getAttributeNode("datetime"):null,K=i.getAttributeNode("content"),D=i.getAttributeNode("about"),I=i.getAttributeNode("src"),G=i.getAttributeNode("resource"),J=i.getAttributeNode("href"),H=i.getAttributeNode("inlist"),r=[];if(B)for(var F=this.tokenize(B.value),
h=0;h<F.length;h++)(n=this.parsePredicate(F[h],E,f.terms,s,t,this.inHTMLMode&&null!=v))&&r.push(n);var u=[];if(y){F=this.tokenize(y.value);for(h=0;h<F.length;h++)(n=this.parsePredicate(F[h],E,f.terms,s,t,this.inHTMLMode&&null!=v))&&u.push(n)}if(this.inHTMLMode&&(null!=B||null!=y)&&null!=v)0==r.length&&(B=null),0==u.length&&(y=null);if(B||y){D&&(j=this.parseSafeCURIEOrCURIEOrURI(D.value,s,t));C&&(p=j);j||(i.parentNode.nodeType==Node.DOCUMENT_NODE?j=e(i.baseURI):f.parentObject&&(j=e(i.parentNode.baseURI)==
f.parentObject?e(i.baseURI):f.parentObject));G&&(m=this.parseSafeCURIEOrCURIEOrURI(G.value,s,t));if(!m)if(J)m=this.resolveAndNormalize(t,encodeURI(J.value));else if(I)m=this.resolveAndNormalize(t,encodeURI(I.value));else if(C&&!D&&(!this.inXHTMLMode||!("head"==i.localName||"body"==i.localName)))m=this.newBlankNode();C&&!D&&this.inXHTMLMode&&("head"==i.localName||"body"==i.localName)?p=j:C&&!D&&(p=m)}else if(v&&!K&&!x){if(D&&(j=this.parseSafeCURIEOrCURIEOrURI(D.value,s,t),C&&(p=j)),!j&&i.parentNode.nodeType==
Node.DOCUMENT_NODE?(j=e(i.baseURI),C&&(p=j)):!j&&f.parentObject&&(j=e(i.parentNode.baseURI)==f.parentObject?e(i.baseURI):f.parentObject),C&&!p){G&&(p=this.parseSafeCURIEOrCURIEOrURI(G.value,s,t));!p&&J&&(p=this.resolveAndNormalize(t,encodeURI(J.value)));!p&&I&&(p=this.resolveAndNormalize(t,encodeURI(I.value)));if(!p&&(this.inXHTMLMode||this.inHTMLMode)&&("head"==i.localName||"body"==i.localName))p=j;p||(p=this.newBlankNode());m=p}}else D&&(j=this.parseSafeCURIEOrCURIEOrURI(D.value,s,t)),!j&&G&&(j=
this.parseSafeCURIEOrCURIEOrURI(G.value,s,t)),!j&&J&&(j=this.resolveAndNormalize(t,encodeURI(J.value))),!j&&I&&(j=this.resolveAndNormalize(t,encodeURI(I.value))),j||(i.parentNode.nodeType==Node.DOCUMENT_NODE?j=e(i.baseURI):(this.inXHTMLMode||this.inHTMLMode)&&("head"==i.localName||"body"==i.localName)?j=e(i.parentNode.baseURI)==f.parentObject?e(i.baseURI):f.parentObject:C?j=this.newBlankNode():f.parentObject&&(j=e(i.parentNode.baseURI)==f.parentObject?e(i.baseURI):f.parentObject,v||(A=!0))),C&&(p=
j);if(j&&(D||G||p))h=j,C&&(!D&&!G&&m)&&(h=m),this.newSubjectOrigin(i,h);if(p){F=this.tokenize(C.value);for(h=0;h<F.length;h++)(d=this.parseTermOrCURIEOrAbsURI(F[h],E,f.terms,s,t))&&this.addTriple(i,p,g.typeURI,{type:g.objectURI,value:d})}j&&j!=f.parentObject&&(w={},q=!0);if(m){if(B&&H)for(h=0;h<r.length;h++)d=w[r[h]],d||(d=[],w[r[h]]=d),d.push({type:g.objectURI,value:m});else if(B)for(h=0;h<r.length;h++)this.addTriple(i,j,r[h],{type:g.objectURI,value:m});if(y)for(h=0;h<u.length;h++)this.addTriple(i,
m,u[h],{type:g.objectURI,value:j})}else{if(j&&!m&&(B||y))m=this.newBlankNode();if(B&&H)for(h=0;h<r.length;h++)d=w[r[h]],d||(d=[],w[n]=d),l.push({predicate:r[h],list:d});else if(B)for(h=0;h<r.length;h++)l.push({predicate:r[h],forward:!0});if(y)for(h=0;h<u.length;h++)l.push({predicate:u[h],forward:!1})}if(v){u=r=null;x?(r=""==x.value?g.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(x.value,E,f.terms,s,t),u=z&&!K?z.value:r==g.XMLLiteralURI||r==g.HTMLLiteralURI?null:K?K.value:i.textContent):K?(r=g.PlainLiteralURI,
u=K.value):z?(u=z.value,r=g.deriveDateTimeType(u),r||(r=g.PlainLiteralURI)):!B&&!y&&(G&&(u=this.parseSafeCURIEOrCURIEOrURI(G.value,s,t)),!u&&J?u=this.resolveAndNormalize(t,encodeURI(J.value)):!u&&I&&(u=this.resolveAndNormalize(t,encodeURI(I.value))),u&&(r=g.objectURI));r||(C&&!D?(r=g.objectURI,u=p):(u=i.textContent,this.inHTMLMode&&"time"==i.localName&&(r=g.deriveDateTimeType(u)),r||(r=g.PlainLiteralURI)));F=this.tokenize(v.value);for(h=0;h<F.length;h++)if(n=this.parsePredicate(F[h],E,f.terms,s,t))H?
(d=w[n],d||(d=[],w[n]=d),d.push(r==g.XMLLiteralURI||r==g.HTMLLiteralURI?{type:r,value:i.childNodes}:{type:r?r:g.PlainLiteralURI,value:u,language:M})):r==g.XMLLiteralURI||r==g.HTMLLiteralURI?this.addTriple(i,j,n,{type:r,value:i.childNodes}):this.addTriple(i,j,n,{type:r?r:g.PlainLiteralURI,value:u,language:M})}if(j&&!A)for(h=0;h<f.incomplete.length;h++)f.incomplete[h].list?f.incomplete[h].list.push({type:g.objectURI,value:j}):f.incomplete[h].forward?this.addTriple(i,f.subject,f.incomplete[h].predicate,
{type:g.objectURI,value:j}):this.addTriple(i,j,f.incomplete[h].predicate,{type:g.objectURI,value:f.subject});p=null;t=j;A?(p=this.push(f,f.subject),p.parentObject=e(i.parentNode.baseURI)==f.parentObject?e(i.baseURI):f.parentObject,p.incomplete=f.incomplete,p.language=M,p.prefixes=s):(p=this.push(f,j),p.parentObject=m?m:j?j:f.subject,p.prefixes=s,p.incomplete=l,m&&(t=m,w={},q=!0),p.listMapping=w,p.language=M);p.vocabulary=E;q&&c.unshift({parent:i,context:f,subject:t,listMapping:w});for(i=i.lastChild;i;i=
i.previousSibling)i.nodeType==Node.ELEMENT_NODE&&c.unshift({current:i,context:p})}}this.inHTMLMode&&this.copyProperties();for(h=0;h<this.finishedHandlers.length;h++)this.finishedHandlers[h](a)};g.prototype.copyProperties=function(){};g.prototype.push=function(a,b){return{parent:a,subject:b?b:a?a.subject:null,parentObject:null,incomplete:[],listMapping:a?a.listMapping:{},language:a?a.language:this.language,prefixes:a?a.prefixes:this.target.graph.prefixes,terms:a?a.terms:this.target.graph.terms,vocabulary:a?
a.vocabulary:this.vocabulary}};H.prototype.toString=function(){var a="_:"==this.subject.substring(0,2)?this.subject+"":"<"+this.subject+">",b=!0,c;for(c in this.predicates)b?b=!1:a+=";\n",a+=" "+this.predicates[c];return a+" ."};H.prototype.toObject=function(){var a={subject:this.subject,predicates:{}},b;for(b in this.predicates){var c=this.predicates[b],e={predicate:b,objects:[]};a.predicates[b]=e;for(var f=0;f<c.objects.length;f++){var d=c.objects[f];if(d.type==g.XMLLiteralURI){for(var k=new XMLSerializer,
i="",h=0;h<d.value.length;h++)d.value[h].nodeType==Node.ELEMENT_NODE?i+=k.serializeToString(d.value[h]):d.value[h].nodeType==Node.TEXT_NODE&&(i+=d.value[h].nodeValue);e.objects.push({type:d.type,value:i,language:d.language})}else e.objects.push({type:d.type,value:d.value,language:d.language})}}return a};H.prototype.getValues=function(){for(var a=[],b=0;b<arguments.length;b++){var c=this.graph.curieParser.parse(arguments[b],!0);if(c=this.predicates[c])for(var e=0;e<c.objects.length;e++)a.push(c.objects[e].value)}return a};
x.getPrefixMap=function(a){for(var b={};a.attributes;){for(var c=0;c<a.attributes.length;c++)if("http://www.w3.org/2000/xmlns/"==a.attributes[c].namespaceURI){var e=a.attributes[c].localName;"xmlns"==a.attributes[c].localName&&(e="");e in b||(b[e]=a.attributes[c].nodeValue)}a=a.parentNode}return b};x.prototype.toString=function(){for(var a="<"+this.predicate+"> ",b=0;b<this.objects.length;b++)if(0<b&&(a+=", "),"http://www.w3.org/1999/02/22-rdf-syntax-ns#object"==this.objects[b].type)a="_:"==this.objects[b].value.substring(0,
2)?a+this.objects[b].value:a+("<"+this.objects[b].value+">");else if("http://www.w3.org/2001/XMLSchema#integer"==this.objects[b].type||"http://www.w3.org/2001/XMLSchema#decimal"==this.objects[b].type||"http://www.w3.org/2001/XMLSchema#double"==this.objects[b].type||"http://www.w3.org/2001/XMLSchema#boolean"==this.objects[b].type)a+=this.objects[b].value;else if("http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral"==this.objects[b].type){for(var c=new XMLSerializer,e="",f=0;f<this.objects[b].value.length;f++)if(this.objects[b].value[f].nodeType==
Node.ELEMENT_NODE){var d=x.getPrefixMap(this.objects[b].value[f]),g=[],i;for(i in d)g.push(i);g.sort();for(var h=this.objects[b].value[f].cloneNode(!0),A=0;A<g.length;A++)h.setAttributeNS("http://www.w3.org/2000/xmlns/",0==g[A].length?"xmlns":"xmlns:"+g[A],d[g[A]]);e+=c.serializeToString(h)}else this.objects[b].value[f].nodeType==Node.TEXT_NODE&&(e+=this.objects[b].value[f].nodeValue);a+='"""'+e.replace(/"""/,'\\"\\"\\"')+'"""^^<http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral>'}else c=this.objects[b].value,
a=0<=c.indexOf("\n")||0<=c.indexOf("\r")?a+('"""'+c.replace(/"""/,'\\"\\"\\"')+'"""'):a+('"'+c.replace(/"/,'\\"')+'"'),"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral"!=this.objects[b].type?a+="^^<"+this.objects[b].type+">":this.objects[b].language&&(a+="@"+this.objects[b].language);return a};q.prototype=new g;q.prototype.constructor=g;q.prototype.getObjectSize=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};q.prototype.init=function(){this.target.tripleCount=0;var a=
this;this.finishedHandlers.push(function(){for(var b in a.target.graph.subjects)0==a.getObjectSize(a.target.graph.subjects[b].predicates)&&delete a.target.graph.subjects[b]})};q.prototype.newSubjectOrigin=function(a,b){for(var c=this.newSubject(null,b),e=0;e<c.origins.length;e++)if(c.origins[e]===a)return;c.origins.push(a);a.data||Object.defineProperty(a,"data",{value:c,writable:!1,configurable:!0,enumerable:!0})};q.prototype.newSubject=function(a,b){var c=this.target.graph.subjects[b];c||(c=new H(this.target,
b),this.target.graph.subjects[b]=c);return c};q.prototype.addTriple=function(a,b,c,e){var f=this.newSubject(a,b),b=f.predicates[c];b||(b=new x(c),f.predicates[c]=b);for(var d=0;d<b.objects.length;d++)if(b.objects[d].type==e.type&&b.objects[d].value==e.value){b.objects[d].origin!==a&&(Array.isArray(b.objects[d].origin)||(c=[],c.push(b.objects[d].origin),b.objects[d].origin=c),b.objects[d].origin.push(a));return}this.target.tripleCount++;b.objects.push(e);e.origin=a;c==g.typeURI&&f.types.push(e.value)};
q.rdfaCopyPredicate="http://www.w3.org/ns/rdfa#copy";q.rdfaPatternType="http://www.w3.org/ns/rdfa#Pattern";q.prototype.copyProperties=function(){var a=[],b={},c;for(c in this.target.graph.subjects){var e=this.target.graph.subjects[c],f=e.predicates[q.rdfaCopyPredicate];if(f){a.push(c);for(var d=0;d<f.objects.length;d++)if(f.objects[d].type==g.objectURI){var k=f.objects[d].value,i=this.target.graph.subjects[k];if(i){var h=i.predicates[g.typeURI];if(h){for(var A=!1,j=0;j<h.objects.length&&!A;j++)h.objects[j].value==
q.rdfaPatternType&&h.objects[j].type==g.objectURI&&(A=!0);if(A){b[k]=!0;for(var m in i.predicates)if(k=i.predicates[m],m==g.typeURI){if(1!=k.objects.length)for(j=0;j<k.objects.length;j++)k.objects[j].value!=q.rdfaPatternType&&(h=e.predicates[m],h||(h=new x(m),e.predicates[m]=h),h.objects.push({type:k.objects[j].type,value:k.objects[j].value,language:k.objects[j].language,origin:k.objects[j].origin}),e.types.push(k.objects[j].value))}else{h=e.predicates[m];h||(h=new x(m),e.predicates[m]=h);for(j=0;j<
k.objects.length;j++)h.objects.push({type:k.objects[j].type,value:k.objects[j].value,language:k.objects[j].language,origin:k.objects[j].origin})}}}}}}}for(d=0;d<a.length;d++)e=this.target.graph.subjects[a[d]],delete e.predicates[q.rdfaCopyPredicate];for(c in b)delete this.target.graph.subjects[c]};L.prototype.getProperties=function(){var a=[],b;for(b in this._data_.properties)a.push(b);return a};L.prototype.getSubject=function(){return this._data_.subject};L.prototype.get=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,
!0);return(a=this._data_.properties[a])?a[0]:null};L.prototype.getAll=function(a){a=this._data_.owner._data_.graph.curieParser.parse(a,!0);return this._data_.properties[a]};l.prototype=new v;l.prototype.constructor=l;l.nameChar="[-A-Z_a-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c-\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd\u10000-\uefffF.0-9\u00b7\u0300-\u036f\u203f-\u2040]";l.nameStartChar="[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u00ff\u0100-\u0131\u0134-\u013e\u0141-\u0148\u014a-\u017e\u0180-\u01c3\u01cd-\u01f0\u01f4-\u01f5\u01fa-\u0217\u0250-\u02a8\u02bb-\u02c1\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03d6\u03da\u03dc\u03de\u03e0\u03e2-\u03f3\u0401-\u040c\u040e-\u044f\u0451-\u045c\u045e-\u0481\u0490-\u04c4\u04c7-\u04c8\u04cb-\u04cc\u04d0-\u04eb\u04ee-\u04f5\u04f8-\u04f9\u0531-\u0556\u0559\u0561-\u0586\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0641-\u064a\u0671-\u06b7\u06ba-\u06be\u06c0-\u06ce\u06d0-\u06d3\u06d5\u06e5-\u06e6\u0905-\u0939\u093d\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8b\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ae0\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b36-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0e01-\u0e2e\u0e30\u0e32-\u0e33\u0e40-\u0e45\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eae\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0f40-\u0f47\u0f49-\u0f69\u10a0-\u10c5\u10d0-\u10f6\u1100\u1102-\u1103\u1105-\u1107\u1109\u110b-\u110c\u110e-\u1112\u113c\u113e\u1140\u114c\u114e\u1150\u1154-\u1155\u1159\u115f-\u1161\u1163\u1165\u1167\u1169\u116d-\u116e\u1172-\u1173\u1175\u119e\u11a8\u11ab\u11ae-\u11af\u11b7-\u11b8\u11ba\u11bc-\u11c2\u11eb\u11f0\u11f9\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2126\u212a-\u212b\u212e\u2180-\u2182\u3041-\u3094\u30a1-\u30fa\u3105-\u312c\uac00-\ud7a3\u4e00-\u9fa5\u3007\u3021-\u3029_]";
l.NCNAME=RegExp("^"+g.nameStartChar+g.nameChar+"*$");l.toProjection=function(a,b,c){var e=new L(a,b.subject),f;for(f in b.predicates){var d=b.predicates[f],g=[];e._data_.properties[f]=g;for(var i=0;i<d.objects.length;i++)g.push(d.objects[i].value)}if(c)for(var h in c)f=c[h],f=a._data_.graph.curieParser.parse(f,!0),(g=e._data_.properties[f])&&(e[h]=1==g.length?g[0]:g);return e};l.prototype.getProperties=function(a){var b=[];if(a){if(a=this._data_.graph.curieParser.parse(a,!0),f=this._data_.graph.subjects[a])for(var c in f.predicates)b.push(c)}else{var a=
{},e;for(e in this._data_.graph.subjects){var f=this._data_.graph.subjects[e];if(f)for(c in f.predicates)a[c]||(a[c]=!0,b.push(c))}}return b};l.prototype.getSubjects=function(a,b){var c=[];a&&(a=this._data_.graph.curieParser.parse(a,!0));if(a&&b){var e=this._data_.graph.curieParser.parse(b,!0),f;for(f in this._data_.graph.subjects){var d=this._data_.graph.subjects[f];if(d=d.predicates[a])for(var g=0;g<d.objects.length;g++)if(d.objects[g].value==b||d.objects[g].value==e){c.push(f);break}}}else if(a)for(f in this._data_.graph.subjects)d=
this._data_.graph.subjects[f],(d=d.predicates[a])&&c.push(f);else if(b)for(f in e=this._data_.graph.curieParser.parse(b,!0),this._data_.graph.subjects){var d=this._data_.graph.subjects[f],i;for(i in d.predicates)if(d=f.predicates[i]){for(var h=null,g=0;!h&&g<d.objects.length;g++)if(d.objects[g].value==b||node.objects[g].value==e)h=d.objects[g];if(h){c.push(f);break}}}else for(f in this._data_.graph.subjects)c.push(f);return c};l.prototype.getValueOrigins=function(a,b){var c=[],e=function(a){if(a)for(var b=
0;b<a.objects.length;b++)if(Array.isArray(a.objects[b].origin))for(var e=0;e<a.objects[b].origin.length;e++)c.push({origin:a.objects[b].origin[e],value:a.objects[b].value});else c.push({origin:a.objects[b].origin,value:a.objects[b].value})};b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){var a=this._data_.graph.curieParser.parse(a,!0),d=this._data_.graph.subjects[a];if(d)if(b)e(d.predicates[b]);else for(var g in d.predicates)e(d.predicates[g])}else if(b)for(var k in this._data_.graph.subjects)d=
this._data_.graph.subjects[k],e(d.predicates[b]);else for(k in this._data_.graph.subjects)for(g in d=this._data_.graph.subjects[k],d.predicates)e(d.predicates[g]);return c};l.prototype.getValues=function(a,b){var c=[];b&&(b=this._data_.graph.curieParser.parse(b,!0));if(a){var a=this._data_.graph.curieParser.parse(a,!0),e=this._data_.graph.subjects[a];if(e)if(b){var d=e.predicates[b];if(d)for(var g=0;g<d.objects.length;g++)c.push(d.objects[g].value)}else for(var k in e.predicates){d=e.predicates[k];
for(g=0;g<d.objects.length;g++)c.push(d.objects[g].value)}}else if(b)for(var i in this._data_.graph.subjects){if(e=this._data_.graph.subjects[i],d=e.predicates[b])for(g=0;g<d.objects.length;g++)c.push(d.objects[g].value)}else for(i in this._data_.graph.subjects)for(k in e=this._data_.graph.subjects[i],e.predicates){d=e.predicates[k];for(g=0;g<d.objects.length;g++)c.push(d.objects[g].value)}return c};Object.defineProperty(l.prototype,"prefixes",{enumerable:!0,get:function(){return Object.keys(this._data_.graph.prefixes)}});
l.prototype.setMapping=function(a,b){this._data_.graph.prefixes[a]=b};l.prototype.getMapping=function(a){return this._data_.graph.prefixes[a]};l.prototype.expand=function(a){return this._data_.graph.curieParser.parse(a,!0)};l.prototype.shorten=function(a){for(prefix in this._data_.graph.prefixes){var b=this._data_.graph.prefixes[prefix];if(0==a.indexOf(b))return prefix+":"+a.substring(b.length)}return a};l.prototype.getSubject=function(a){if(!a)return null;a=this._data_.graph.curieParser.parse(a,
!0);return(a=this._data_.graph.subjects[a])?a:null};l.prototype.getProjection=function(a,b){if(!a)return null;var a=this._data_.graph.curieParser.parse(a,!0),c=this._data_.graph.subjects[a];return!c?null:l.toProjection(this,c,b)};l.prototype.getProjections=function(a,b,c){a&&(a=this._data_.graph.curieParser.parse(a,!0));var d=[];"undefined"==typeof b&&"undefined"==typeof c&&(c=a);if(a&&b){var f=this._data_.graph.curieParser.parse(b,!0),g;for(g in this._data_.graph.subjects){var k=this._data_.graph.subjects[g],
i=k.predicates[a];if(i)for(var h=0;h<i.objects.length;h++)if(i.objects[h].value==b||i.objects[h].value==f){d.push(l.toProjection(this,k,c));break}}}else if(a)for(g in this._data_.graph.subjects)k=this._data_.graph.subjects[g],k.predicates[a]&&d.push(l.toProjection(this,k,c));else for(g in this._data_.graph.subjects)k=this._data_.graph.subjects[g],d.push(l.toProjection(this,k,c));return d};l.prototype.merge=function(a,b){var c=b&&b.mergeBlankNodes?!0:!1,d=0;if(!c)for(var f in this._data_.graph.subjects){var n=
/_:([0-9]+)/.exec(f);n&&(n=parseInt(n[1]),n>d&&(d=n))}if(a){var k={},c=c?function(a){return a}:function(a){var b=k[a];!b&&/_:([0-9]+)/.test(a)&&(d++,b="_:"+d,k[a]=b);return b?b:a};for(f in a){var i=c(f),n=a[f];f=i?i:f;if(i=this._data_.graph.subjects[f])for(var h in n.predicates){var l=n.predicates[h],j=i.predicates[h];if(j)for(var m=0;m<l.objects.length;m++){for(var p=l.objects[m],s=[],q=0;q<j.objects.length;q++)p.type==g.XMLLiteralURI&&(j.objects[q].type!=p.type||j.objects[q].value!==p.value)?s.push(p):
(j.objects[q].type!=p.type||j.objects[q].value==p.value)&&s.push(p);for(q=0;q<s.length;q++)s[q].type==g.objectURI&&(s[q].value=c(s[q].value)),j.objects.push(s[q])}else{i.predicates[h]=l;for(m=0;m<l.objects.length;m++)l.objects[m].type==g.objectURI&&(l.objects[m].value=c(l.objects[m].value))}}else for(h in this._data_.graph.subjects[f]=n,n.subject=f,n.predicates){l=n.predicates[h];for(m=0;m<l.objects.length;m++)l.objects[m].type==g.objectURI&&(l.objects[m].value=c(l.objects[m].value))}}}if(b&&b.prefixes)for(var w in b.prefixes)this._data_.graph.prefixes[w]||
(this._data_.graph.prefixes[w]=b.prefixes[w])};Element.prototype.getElementsByType=function(){var a=arguments,b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var c=0;c<a.length;c++)if(0<=b.data.types.indexOf(a[c]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1),c=[];for(c.item=function(a){return this[a]};b.nextNode();)c.push(b.currentNode);return c};Element.prototype.getFirstElementByType=function(){var a=
arguments,b=this.ownerDocument.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,{acceptNode:function(b){if(!b.data)return NodeFilter.FILTER_SKIP;for(var d=0;d<a.length;d++)if(0<=b.data.types.indexOf(a[d]))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP}},!1);return b.nextNode()?b.currentNode:null};l.attach=function(a,b){Object.defineProperty(a,"data",{value:new l(b&&b.baseURI?b.baseURI:a.nodeType==Node.DOCUMENT_NODE?a.documentElement.baseURI:a.graph.baseURI),writable:!1,configurable:!1,
enumerable:!0});a.getElementsByType=function(a){return this.getElementsByProperty("http://www.w3.org/1999/02/22-rdf-syntax-ns#type",a)};a.getElementsBySubject=function(a){var b=[];b.item=function(a){return this[a]};a=this.data._data_.graph.curieParser.parse(a,!0);if(a=this.data._data_.graph.subjects[a])for(var d=0;d<a.origins.length;d++)b.push(a.origins[d]);return b};a.getElementsByProperty=function(a,b){var d=[];d.item=function(a){return this[a]};b&&(b=this.data._data_.graph.curieParser.parse(b,
!1));var g="undefined"==typeof b,a=this.data._data_.graph.curieParser.parse(a,!0),k;for(k in this.data._data_.graph.subjects){var i=this.data._data_.graph.subjects[k].predicates[a];if(i)for(var h=0;h<i.objects.length;h++)if(g||i.objects[h].value==b)Array.isArray(i.objects[h].origin)?d.push.apply(d,i.objects[h].origin):d.push(i.objects[h].origin)}return d};a.getElementSubject=function(a){for(var b in this.data._data_.graph.subjects)if(0<=this.data._data_.graph.subjects[b].origins.indexOf(a))return b;
return null}};d.prototype=new v;d.prototype.constructor=d;d.commentRE=/^#.*/;d.wsRE=/^\s+/;d.iriRE=/^\<((?:(?:[^\x00-\x20<>"{}|^`\\]|\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]|\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])*))\>/;d.singleQuoteLiteralRE=/^'((?:[^'\n\r\\]*|\\'|\\)*)'/;d.doubleQuoteLiteralRE=/^\"((?:[^"\n\r\\]*|\\"|\\)*)\"/;d.longDoubleQuoteLiteralRE=/^\"\"\"((?:[^"\\]*|\\"|\\|\"(?!\")|\"\"(?!\"))*)\"\"\"/;d.longSingleQuoteLiteralRE=
/^'''((?:[^'\\]*|\\'|\\|'(?!')|''(?!'))*)'''/;d.typeRE=/^\^\^/;d.dotRE=/^\./;d.openSquareBracketRE=/^\[/;d.closeSquareBracketRE=/^\]/;d.prefixRE=/^((?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\.\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\u00B7]|[0-9]|[\u0300-\u036F]|[\u203F-\u2040]))?)?):/;
d.blankNodeRE=/^(_:)/;d.localNameRE=/^((?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_:]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=\/?#@%])(?:(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-\.:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%])*(?:[A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD]|[\ud800-\udfff][\ud800-\udfff]|[_\-:\u00b7]|[\u0300-\u036F]|[\u203F-\u2040]|[0-9]|%[0-9A-Fa-f][0-9A-Fa-f]|\\[_~\.\-!$&'()*+,;=/?#@%]))?)/;
d.langRE=/^@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*)/;d.prefixIDRE=/^@prefix/;d.baseRE=/^@base/;d.sparqlPrefixRE=/^[Pp][Rr][Ee][Ff][Ii][Xx]/;d.sparqlBaseRE=/^[Bb][Aa][Ss][Ee]/;d.semicolonRE=/^;/;d.commaRE=/^,/;d.aRE=/^a/;d.openParenRE=/^\(/;d.closeParenRE=/^\)/;d.integerRE=/^([+-]?[0-9]+)/;d.decimalRE=/^([+-]?[0-9]*\.[0-9]+)/;d.doubleRE=/^([+-]?(?:[0-9]+\.[0-9]*[eE][+-]?[0-9]+|\.[0-9]+[eE][+-]?[0-9]+|[0-9]+[eE][+-]?[0-9]+))/;d.booleanRE=/^(true|false)/;d.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type";
d.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object";d.plainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral";d.nilURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil";d.firstURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#first";d.restURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest";d.xsdStringURI="http://www.w3.org/2001/XMLSchema#string";d.xsdIntegerURI="http://www.w3.org/2001/XMLSchema#integer";d.xsdDecimalURI="http://www.w3.org/2001/XMLSchema#decimal";d.xsdDoubleURI=
"http://www.w3.org/2001/XMLSchema#double";d.xsdBooleanURI="http://www.w3.org/2001/XMLSchema#boolean";d.prototype.reset=function(){this.context=new O;this.errorCount=this.blankNodeCounter=0;this.lineNumber=1};d.dumpGraph=function(a){for(var b in a)console.log(a[b].toString())};d.prototype.newBlankNode=function(){this.blankNodeCounter++;return"_:"+this.blankNodeCounter};d.prototype._match=function(a,b){var c=a.exec(b);return c?{text:c[0],remaining:b.substring(c[0].length),values:1<c.length?c.splice(1):
null}:null};d.prototype._trim=function(a){var b=null;do{if(b=d.wsRE.exec(a))this.lineNumber+=b[0].split(/\n/).length-1,a=a.substring(b[0].length);(b=d.commentRE.exec(a))&&(a=a.substring(b[0].length))}while(b);return a};d.prototype.reportError=function(a){this.onError(this.lineNumber,a)};d.prototype.parse=function(a,b){b&&(this.context.baseURI=this.parseURI(b));for(;0<a.length;)a=this._trim(a),0<a.length&&(a=this.parseStatement(a))};d.prototype.parseStatement=function(a){var b=this._match(d.prefixIDRE,
a);if(b){var c=this._trim(b.remaining),b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after @prefix: "+a.substring(20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @prefix: "+c.substring(20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(e){this.reportError(e.toString()),
this.errorCount++}c=this._trim(b.remaining);if(b=this._match(d.dotRE,c))return b.remaining;this.reportError("Missing end . for @prefix statement.  Found: "+c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(d.baseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after @base: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):this.parseURI(b.iri)}catch(f){this.reportError(f+
"; IRI: "+b.iri),this.errorCount++}c=this._trim(b.remaining);if(b=this._match(d.dotRE,c))return b.remaining;this.reportError("Missing end . for @base statement.  Found: "+c.substring(0,20)+"...");this.errorCount++;return c}if(b=this._match(d.sparqlPrefixRE,a)){c=this._trim(b.remaining);b=this.parsePrefixName(c);if(!b)return this.reportError("Cannot parse prefix after PREFIX: "+a.substring(0,20)+"..."),this.errorCount++,c;a=b.prefix;c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after PREFIX: "+
c.substring(0,20)+"..."),this.errorCount++,c;this.context.prefixes[a]=this.context.baseURI?this.context.baseURI.resolve(b.iri):b.iri;try{this.parseURI(this.context.prefixes[a])}catch(g){this.reportError(g.toString()),this.errorCount++}return b.remaining}if(b=this._match(d.sparqlBaseRE,a)){c=this._trim(b.remaining);b=this.parseIRIReference(c);if(!b)return this.reportError("Cannot parse IRI after BASE: "+c.substring(0,20)+"..."),this.errorCount++,c;try{this.context.baseURI=this.context.baseURI?this.parseURI(this.context.baseURI.resolve(b.iri)):
this.parseURI(b.iri)}catch(k){this.reportError(k+"; IRI: "+b.iri),this.errorCount++}return b.remaining}a=this.parseTriples(a);a=this._trim(a);if(b=this._match(d.dotRE,a))return b.remaining;this.reportError("Missing end . triples.  Found: "+a.substring(0,20)+"...");this.errorCount++;return a};d.prototype.parseTriples=function(a){var b=this.parseIRI(a);if(b||(b=this.parseBlankNode(a)))return this.parsePredicateObjectList(b.iri,this._trim(b.remaining));if(b=this._match(d.openParenRE,a)){var a=null,c=
b.remaining,e=null;do{c=this._trim(c);if(b=this._match(d.closeParenRE,c)){c=b.remaining;e?this.addTriple(e,d.restURI,{type:d.objectURI,value:d.nilURI}):a=this.newBlankNode();break}b=this.newBlankNode();e?this.addTriple(e,d.restURI,{type:d.objectURI,value:b}):a=b;e=b;c=this.parseObject(e,d.firstURI,c)}while(0<c.length);return this.parsePredicateObjectList(a,this._trim(c))}return(b=this._match(d.openSquareBracketRE,a))?(a=this.newBlankNode(),c=this._trim(b.remaining),(b=this._match(d.closeSquareBracketRE,
c))?c=b.remaining:(c=this.parsePredicateObjectList(a,c),(b=this._match(d.closeSquareBracketRE,this._trim(c)))?c=b.remaining:this.reportError("Missing end square bracket ']'.")),this.parsePredicateObjectList(a,this._trim(c),!0)):!b?(this.reportError("Terminating: Cannot parse at "+a.substring(0,20)+" ..."),this.errorCount++,""):this.parsePredicateObjectList(b.iri,this._trim(b.remaining))};d.prototype.parsePredicateObjectList=function(a,b,c){var e=!0,f=null;do{var g=this.parseIRI(b);if(!g&&(g=this._match(d.aRE,
b)))g.iri=d.typeURI;if(!g){if(c)return b;this.reportError("Terminating: Cannot parse predicate IRI.");this.errorCount++;return""}f=this.parseObjectList(a,g.iri,this._trim(g.remaining));if(g=this._match(d.semicolonRE,this._trim(f))){do b=this._trim(g.remaining),g=this._match(d.semicolonRE,b);while(g);c=!0}else e=!1}while(e);return f};d.prototype.parseObjectList=function(a,b,c){var e=!0,f=null;do{var f=this.parseObject(a,b,c),g=this._match(d.commaRE,this._trim(f));g?c=this._trim(g.remaining):e=!1}while(e);
return f};d.prototype.parseObject=function(a,b,c){var e=this.parseIRI(c);if(e||(e=this.parseBlankNode(c)))return this.addTriple(a,b,{type:d.objectURI,value:e.iri}),e.remaining;if(e=this._match(d.openParenRE,c)){var f=a,g=b,k=e.remaining;do{k=this._trim(k);if(e=this._match(d.closeParenRE,k))return this.addTriple(f,f==a?b:d.restURI,{type:d.objectURI,value:d.nilURI}),e.remaining;e=this.newBlankNode();f==a?this.addTriple(a,b,{type:d.objectURI,value:e}):this.addTriple(f,d.restURI,{type:d.objectURI,value:e});
f=e;g=d.firstURI;k=this.parseObject(f,g,k)}while(0<k.length)}if(e=this._match(d.openSquareBracketRE,c)){c=this.newBlankNode();this.addTriple(a,b,{type:d.objectURI,value:c});k=this.parsePredicateObjectList(c,this._trim(e.remaining),!0);k=this._trim(k);if(e=this._match(d.closeSquareBracketRE,k))return e.remaining;this.reportError("Missing close square bracket ']' for blank node "+c+" predicate object list");this.errorCount++;return k}if(e=this.parseLiteral(c))return this.addTriple(a,b,{type:e.type?
e.type:d.plainLiteralURI,value:e.literal,language:e.language}),e.remaining;this.reportError("Terminating: Cannot parse literal at "+c.substring(0,20));this.errorCount++;return""};d.prototype.parsePrefixName=function(a){if(a=this._match(d.prefixRE,a))a.prefix=a.values[0];return a};d.prototype.parseIRIReference=function(a){if(a=this._match(d.iriRE,a))a.iri=d.expandURI(a.values[0]);return a};d.prototype.parseIRI=function(a){var b=this._match(d.iriRE,a);if(b){a=d.expandURI(b.values[0]);b.iri=this.context.baseURI?
this.context.baseURI.resolve(a):a;try{this.parseURI(b.iri)}catch(c){this.reportError(c.toString()),this.errorCount++}return b}if(b=this._match(d.prefixRE,a)){var e=b.values[0],a=this.context.prefixes[e];if(!a)return this.reportError("No prefix mapping for "+e),this.errorCount++,null;e=b.remaining;if(b=this._match(d.localNameRE,e)){b.iri=a+d.expandName(b.values[0]);try{this.parseURI(b.iri)}catch(f){this.reportError(f.toString()),this.errorCount++}return b}return{iri:a,remaining:e}}return null};d.prototype.parseBlankNode=
function(a){if(a=this._match(d.blankNodeRE,a))if(a=this._match(d.localNameRE,a.remaining))return a.iri="_:"+d.expandName(a.values[0]),a;return null};d.prototype.parseLiteral=function(a){var b=this._match(d.longDoubleQuoteLiteralRE,a);b||(b=this._match(d.longSingleQuoteLiteralRE,a));b||(b=this._match(d.singleQuoteLiteralRE,a));b||(b=this._match(d.doubleQuoteLiteralRE,a));if(b){a=null;try{a=d.expandLiteral(b.values[0])}catch(c){this.reportError(c.toString()),this.errorCount++}var e=b.remaining;if(b=
this._match(d.langRE,e))return b.literal=a,b.language=b.values[0],b;if(b=this._match(d.typeRE,e)){e=b.remaining;if(b=this.parseIRI(e))return b.literal=a,b.type=b.iri,b;this.reportError("Missing type URI after ^^");this.errorCount++}return{literal:a,remaining:e}}return(b=this._match(d.doubleRE,a))?(b.literal=b.values[0],b.type=d.xsdDoubleURI,b):(b=this._match(d.decimalRE,a))?(b.literal=b.values[0],b.type=d.xsdDecimalURI,b):(b=this._match(d.integerRE,a))?(b.literal=b.values[0],b.type=d.xsdIntegerURI,
b):(b=this._match(d.booleanRE,a))?(b.literal=b.values[0],b.type=d.xsdBooleanURI,b):null};d.prototype.newSubject=function(a){var b=this.context.subjects[a];b||(b=new H(this.context,a),this.context.subjects[a]=b);return b};d.expandHex=function(a){for(var b=a.split(/[0-9A-Fa-f]+/),c=0;c<b.length;c++)if(0<b[c].length)throw"Bad hex in escape: "+a;b=parseInt(a,16);if(isNaN(b))throw"Bad hex in escape: "+a;if(65536>b)return String.fromCharCode(b);a=b-65536;b=a&1023;return String.fromCharCode((a>>10)+55296)+
String.fromCharCode(b+56320)};d.escapedSequenceRE=/(\\t|\\b|\\n|\\r|\\f|\\"|\\'|\\\\|(?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;d.expandLiteral=function(a){for(var a=a.split(d.escapedSequenceRE),b="",c=0;c<a.length;c++)if(0!=a[c].length)if("\\t"==a[c])b+="\t";else if("\\b"==a[c])b+="\b";else if("\\n"==a[c])b+="\n";else if("\\r"==a[c])b+="\r";else if("\\f"==a[c])b+="\f";else if('\\"'==a[c])b+=
'"';else if("\\'"==a[c])b+="'";else if("\\\\"==a[c])b+="\\";else if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else{var e=a[c].substring(0,2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,
e+2);b+=a[c]}return b};d.escapedURIRE=/((?:\\U[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f])|(?:\\u[0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f][0-9A-Fa-f]))/;d.expandURI=function(a){for(var a=a.split(d.escapedURIRE),b="",c=0;c<a.length;c++)if(0!=a[c].length)if(6==a[c].length&&"\\"==a[c].charAt(0)&&"u"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else if(10==a[c].length&&"\\"==a[c].charAt(0)&&"U"==a[c].charAt(1))b+=d.expandHex(a[c].substring(2));else{var e=a[c].substring(0,
2);if(2==e.length&&"\\U"==e)throw"Bad hex in \\U escape "+a[c].substring(0,10);if(2==e.length&&"\\u"==e)throw"Bad hex in \\u escape "+a[c].substring(0,6);e=a[c].indexOf("\\");if(0<=e)throw"Bad escape "+a[c].substring(e,e+2);b+=a[c]}return b};d.escapedNameCharRE=/(\\[_~\.\-!$&'()*+,;=/?#@%])/;d.expandName=function(a){for(var a=a.split(d.escapedNameCharRE),b="",c=0;c<a.length;c++)0!=a[c].length&&(b="\\"==a[c].charAt(0)?b+a[c].charAt(1):b+a[c]);return b};d.prototype.addTriple=function(a,b,c){var a=this.newSubject(a),
e=a.predicates[b];e||(e=new x(b),a.predicates[b]=e);e.objects.push(c);b==d.typeURI&&a.types.push(c.value)};var z={attach:function(a,b){var c=a.implementation.hasFeature;a.implementation.hasFeature=function(a,b){return"RDFaAPI"==a&&"1.1"==b?!0:c.apply(this,arguments)};var d=a.data?!0:!1;if(a.head){var f=a.createElement("meta");f.setAttribute("name","green-turtle-rdfa-message");a.head.appendChild(f);var g=function(){var b=a.createEvent("Event");b.initEvent("green-turtle-rdfa-extension",!0,!0);return b};
f.addEventListener("green-turtle-rdfa-document",function(){var b=JSON.parse(f.getAttribute("content"));if("status"==b.type){var c=g();f.setAttribute("content",'{ "type": "status", "loaded": '+d+', "count": '+a.data._data_.tripleCount+" }");setTimeout(function(){f.dispatchEvent(c)},1)}else if("get-subjects"==b.type){var k=a.data.getSubjects();f.setAttribute("content",'{ "type": "subjects", "subjects": '+JSON.stringify(k)+" }");var j=g();setTimeout(function(){f.dispatchEvent(j)},1)}else if("get-subject"==
b.type){var m=null;if(a.data.getSubject)m=a.data.getSubject(b.subject).toObject();else for(var m={subject:b.subject,predicates:{}},l=a.data.getProjection(b.subject),q=l.getProperties(),v=0;v<q.length;v++){var w=[];m.predicates[q[v]]={predicate:predicate,objects:w};for(var x=l.getAll(q[v]),z=0;z<x.length;z++)k[x[z]]?w.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",value:x[z]}):w.push({type:"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",value:x[z]})}f.setAttribute("content",
JSON.stringify({type:"subject",subject:b.subject,triples:m}));var E=g();setTimeout(function(){f.dispatchEvent(E)},1)}},!1)}a.data?a.data._data_&&a.data._data_.graph.clear():l.attach(a,b);var k=function(){var c=new q(a.data._data_);c.finishedHandlers.push(function(){for(var c in z.processors)z.processors[c].process(a,b)});c.finishedHandlers.push(function(a){if(a.ownerDocument){var b=a.ownerDocument.createEvent("HTMLEvents");b.initEvent("rdfa.loaded",!0,!0);a.ownerDocument.dispatchEvent(b)}});c.process(a.documentElement,
b);d=!0};"loading"==a.readyState?window.addEventListener("load",function(){k()},!1):k()},parse:function(a,b,c){var d=this.processors[b];if(!d)throw"Unsupported media type "+b;d=d.createParser();c&&c.errorHandler&&(d.onError=c.errorHandler);c=c?c.baseURI:null;d.parse(a,c);if(0<d.errorCount)throw c?"Errors during parsing "+c+" of type "+b:"Errors during parsing of type "+b;return d.context},createDocumentData:function(a){return new l(a?a:window?window.location.href:"about:blank")}};Object.defineProperty(z,
"processors",{value:{},writable:!1,configurable:!1,enumerable:!0});z.processors["text/turtle"]={createParser:function(){return new d},process:function(a,b){var c=a.nodeType==Node.DOCUMENT_NODE?a:a.ownerDocument;if(c.data){for(var d=!0,f=c.getElementsByTagNameNS("http://www.w3.org/1999/xhtml","script"),g=0;g<f.length;g++)if("text/turtle"==f[g].getAttribute("type")){var k=this.createParser();b&&b.errorHandler&&(k.onError=b.errorHandler);k.parse(f[g].textContent,b?b.baseURI:null);0<k.errorCount?d=!1:
c.data.merge(k.context.subjects,{prefixes:k.context.prefixes})}return d}}};Object.defineProperty(N,"implementation",{value:z,writable:!1,configurable:!1,enumerable:!0});N.attach=function(a,b){z.attach(a,b)};return N}();GreenTurtle.attach(document);
